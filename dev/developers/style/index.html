<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Styling protocol · Virtual Plant Laboratory</title><meta name="title" content="Styling protocol · Virtual Plant Laboratory"/><meta property="og:title" content="Styling protocol · Virtual Plant Laboratory"/><meta property="twitter:title" content="Styling protocol · Virtual Plant Laboratory"/><meta name="description" content="Documentation for Virtual Plant Laboratory."/><meta property="og:description" content="Documentation for Virtual Plant Laboratory."/><meta property="twitter:description" content="Documentation for Virtual Plant Laboratory."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Virtual Plant Laboratory</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Virtual Plant Laboratory</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/Julia/">Julia basic concepts</a></li><li><a class="tocitem" href="../../manual/Graphs/">Dynamic graph creation and manipulation</a></li><li><a class="tocitem" href="../../manual/Geometry/Primitives/">Geometry primitives</a></li><li><a class="tocitem" href="../../manual/Geometry/Turtle/">Turtle geometry and scenes</a></li><li><a class="tocitem" href="../../manual/Raytracer/">Ray tracing</a></li><li><a class="tocitem" href="../../manual/Visualization/">3D visualization</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/intro_tut/">Intro</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Getting started with VPL</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/getting_started/algae/">Algae growth</a></li><li><a class="tocitem" href="../../tutorials/getting_started/snowflakes/">The Koch snowflake</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">From tree to forest</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/from_tree_forest/tree/">Tree</a></li><li><a class="tocitem" href="../../tutorials/from_tree_forest/forest/">Forest</a></li><li><a class="tocitem" href="../../tutorials/from_tree_forest/growthforest/">Growth forest</a></li><li><a class="tocitem" href="../../tutorials/from_tree_forest/raytracedforest/">Ray-traced forest</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">More on rules and queries</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/more_rules_queries/context/">Context sensitive rules</a></li><li><a class="tocitem" href="../../tutorials/more_rules_queries/relationalqueries/">Relational queries</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">How-to guides</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../howto/GridCloner/">Setting up a grid cloner</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">API</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/graphs/">Graphs</a></li><li><a class="tocitem" href="../../api/geometry/">Scenes and 3D meshes</a></li><li><a class="tocitem" href="../../api/turtle/">Turtle geometry</a></li><li><a class="tocitem" href="../../api/raytracer/">Ray tracing</a></li><li><a class="tocitem" href="../../api/viz/">3D visualization</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">VPLVerse</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-6-1" type="checkbox"/><label class="tocitem" for="menuitem-6-1"><span class="docs-label">SkyDomes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../VPLVerse/SkyDomes/">SkyDomes package</a></li><li><a class="tocitem" href="../../VPLVerse/SkyDomes/API/">SkyDomes API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-2" type="checkbox"/><label class="tocitem" for="menuitem-6-2"><span class="docs-label">Ecophys</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../VPLVerse/Ecophys/">Ecophys package</a></li><li><a class="tocitem" href="../../VPLVerse/Ecophys/photosynthesis/">Photosynthesis API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-3" type="checkbox"/><label class="tocitem" for="menuitem-6-3"><span class="docs-label">PlantSimEngine</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../VPLVerse/PlantSimEngine/">PlantSimEngine package</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-4" type="checkbox"/><label class="tocitem" for="menuitem-6-4"><span class="docs-label">PlantBioPhysics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../VPLVerse/PlantBioPhysics/">PlantBioPhysics package</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox" checked/><label class="tocitem" for="menuitem-7"><span class="docs-label">Developers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../organization/">Internal organization</a></li><li><a class="tocitem" href="../use&amp;dev_packages/">Package and Environment Management for VPL</a></li><li class="is-active"><a class="tocitem" href>Styling protocol</a><ul class="internal"><li><a class="tocitem" href="#Programming"><span>Programming</span></a></li><li><a class="tocitem" href="#General-style"><span>General style</span></a></li><li><a class="tocitem" href="#**Modules**"><span><strong>Modules</strong></span></a></li><li><a class="tocitem" href="#**Functions**"><span><strong>Functions</strong></span></a></li><li><a class="tocitem" href="#**VS-Code-Julia-specific-syntax**"><span><strong>VS Code Julia-specific syntax</strong></span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Developers</a></li><li class="is-active"><a href>Styling protocol</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Styling protocol</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/VirtualPlantLab/VPLDocs/blob/master/docs/src/developers/style.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Styling-protocol"><a class="docs-heading-anchor" href="#Styling-protocol">Styling protocol</a><a id="Styling-protocol-1"></a><a class="docs-heading-anchor-permalink" href="#Styling-protocol" title="Permalink"></a></h1><p>Ana Ernst &amp; Alejandro Morales   Centre for Crop Systems Analysis - Wageningen University</p><p>A styling protocol is essential for code readability, consistency, and maintainability. It ensures that code follows predefined formatting rules, prevents errors, and suggests best practices for overall quality of the code. This type of protocol not only plays a crucial role in code quality but also when it comes to collaboration and long-term software project success.</p><p>This styling protocol was based on the <a href="https://docs.sciml.ai/SciMLStyle/stable/">SciML Style Guide for Julia</a>, adapted for the applications of VirtualPlantLab.</p><h2 id="Programming"><a class="docs-heading-anchor" href="#Programming">Programming</a><a id="Programming-1"></a><a class="docs-heading-anchor-permalink" href="#Programming" title="Permalink"></a></h2><p>This section outlines programming guidelines and best practices to ensure the quality, robustness, and maintainability of your codebase. These guidelines are essential for both the clarity of your code and the ease of collaboration with other users or developers.</p><ul><li>Defensive programming for public API only (not internal code)       Defensive programming is a software development approach that focuses on        anticipating and handling possible errors and exceptions, as well as improve       the reliability and robustness of the code.           <em>For example, if one knows that a function <code>f(w0, w)</code> will have an error unless <code>w0 &lt; p</code>, you can throw the function with a domain specific error: <code>throw(DomainError())</code></em></li><li>Throw exceptions rather than <code>error(&quot;string&quot;)</code></li><li>Always use recipes and let the user load the Makie backend explicitly (but document this in tutorials)</li><li>API must be documented using standard Julia docstrings (see templates)</li><li>When in doubt, a submodule should become a package (see package protocol)</li><li>Green <a href="https://docs.julialang.org/en/v1/manual/performance-tips/#man-code-warntype"><code>@code_warntype</code></a> for all functions       In Julia, &#39;green&#39; code indicates type-stability, which ensures better performance.</li><li>Define accessor for all fields and document these rather than the fields themselves       Accessors provides controlled access to data is important as it allows for future changes to the internal structure without affecting users that rely on accessors.       <em>For example, in the <a href="https://virtualplantlab.com/stable/tutorials/Tree/Tree/">tutorial</a> to build the representation of a 3D binary tree, we can set accessor functions as it follows</em></li></ul><pre><code class="language-julia hljs">module TreeTypes
    import VirtualPlantLab
    # ... (previously defined types)
    # Accessor functions for treeparams parameters
    # Accessor for growth parameter
    function get_growth(params::treeparams)
        return params.growth
    end
    # ... (other previously defined functions)
end</code></pre><h2 id="General-style"><a class="docs-heading-anchor" href="#General-style">General style</a><a id="General-style-1"></a><a class="docs-heading-anchor-permalink" href="#General-style" title="Permalink"></a></h2><p>In this section, we outline the general style guidelines to maintain consistency and readability in your code. These guidelines are exemplified using the tree tutorial as a reference. However, if there is an acronym that is domain specific (e.g., LAI, SLA), it should be kept with the format - <em>Readability is the most important!</em></p><ul><li>4 spaces for indentation</li><li>92 character line length limits</li><li><code>CamelCase</code> for modules, structs and types       For example:       - <code>module TreeTypes ... end</code>       - <code>struct Meristem &lt;: VirtualPlantLab.Node end</code>       - <code>Float64, Abstract64, ...</code></li><li><code>snake_case</code> for functions and variables       For example: <code>prob_break(bud)</code></li><li><code>SNAKE_CASE</code> or <code>SNAKECASE</code> for constants       For example: <code>CONSTANT, CONSTANT_A</code>  </li><li>No Unicode in public APIs       As code can interact with terminals without Unicode support, such as R or Python interfaces.</li><li><code>TODO</code> and <code>XXX</code> in comments for to do and broken code</li><li>Inline comments if within 92 character rule</li><li>Minimize whitespace, specially around brackets or certain operators.       Recommended: <code>check, steps = has_descendant(node, condition = n -&gt; data(n) isa TreeTypes.Meristem)</code> or <code>x^2</code>       Not recommended: <code>check , steps = has_descendant ( node, condition = n -&gt; data ( n ) isa TreeTypes.Meristem )</code> or <code>x ^ 2</code></li><li>Single empty line between functions and multiline blocks (not if they are one-liners)</li><li>Function blocks end in <code>return</code></li><li>Ternary operator if within 92 character rule</li></ul><h2 id="**Modules**"><a class="docs-heading-anchor" href="#**Modules**"><strong>Modules</strong></a><a id="**Modules**-1"></a><a class="docs-heading-anchor-permalink" href="#**Modules**" title="Permalink"></a></h2><ul><li>Module imports at the start of module, before any code (only use <code>import</code>)</li><li>List multiple modules in a single line</li></ul><h2 id="**Functions**"><a class="docs-heading-anchor" href="#**Functions**"><strong>Functions</strong></a><a id="**Functions**-1"></a><a class="docs-heading-anchor-permalink" href="#**Functions**" title="Permalink"></a></h2><ul><li>Short-form only if it fits within 92 characters</li><li>Prefer to use keyword arguments instead of positional arguments (data as first argument)</li><li>Use a named tuple for keyword arguments that are passed along to another method, rather than <code>kwargs...</code> (unless there is very little chance of ambiguity)</li><li>Avoid type piracy and ambiguities (use <a href="https://docs.juliahub.com/General/Aqua/0.5.1/"><code>Aqua.jl</code></a>) </li><li>Basic rules for mutating functions (<code>!</code> and modify first argument)</li><li>Prefer instances to types as arguments (BUT check with <code>@code_warntype</code> that inference is done correctly)</li><li>Avoid one argument per line of code for functions that have a lot of arguments (an exception is the constructor for a model where each argument is a parameter with a default)</li><li>Argument precedence: function &gt; IO stream &gt; mutated input &gt; type &gt; others</li><li>Merge documentation of multiple methods if possible</li><li>You can list <code>kwargs...</code> in the function signature and list the keyword arguments in the <code>docstring</code></li></ul><h2 id="**VS-Code-Julia-specific-syntax**"><a class="docs-heading-anchor" href="#**VS-Code-Julia-specific-syntax**"><strong>VS Code Julia-specific syntax</strong></a><a id="**VS-Code-Julia-specific-syntax**-1"></a><a class="docs-heading-anchor-permalink" href="#**VS-Code-Julia-specific-syntax**" title="Permalink"></a></h2><pre><code class="language-yaml hljs">{
    &quot;[julia]&quot;: {
        &quot;editor.detectIndentation&quot;: false,
        &quot;editor.insertSpaces&quot;: true,
        &quot;editor.tabSize&quot;: 4,
        &quot;files.insertFinalNewline&quot;: true,
        &quot;files.trimFinalNewlines&quot;: true,
        &quot;files.trimTrailingWhitespace&quot;: true,
        &quot;editor.rulers&quot;: [92],
        &quot;files.eol&quot;: &quot;\n&quot;
    },
}</code></pre><p>Use JuliaFormatter(link) with <code>style = &quot;sciml&quot;</code> (in the future and style for VPL will be formally defined) inside <code>.JuliaFormatter.toml</code> (at the root) then</p><pre><code class="language-julia hljs">using JuliaFormatter, SomePackage
format(joinpath(dirname(pathof(SomePackage)), &quot;..&quot;))</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../use&amp;dev_packages/">« Package and Environment Management for VPL</a><div class="flexbox-break"></div></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Tuesday 23 January 2024 09:48">Tuesday 23 January 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
