<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Modules and files · Virtual Plant Laboratory</title><meta name="title" content="Modules and files · Virtual Plant Laboratory"/><meta property="og:title" content="Modules and files · Virtual Plant Laboratory"/><meta property="twitter:title" content="Modules and files · Virtual Plant Laboratory"/><meta name="description" content="Documentation for Virtual Plant Laboratory."/><meta property="og:description" content="Documentation for Virtual Plant Laboratory."/><meta property="twitter:description" content="Documentation for Virtual Plant Laboratory."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Virtual Plant Laboratory</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Virtual Plant Laboratory</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox" checked/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Julia</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Julia/">Julia basic concepts</a></li><li><a class="tocitem" href="../Objects/">Multiple dispatch and composition</a></li><li class="is-active"><a class="tocitem" href>Modules and files</a><ul class="internal"><li><a class="tocitem" href="#Files"><span>Files</span></a></li><li><a class="tocitem" href="#Modules"><span>Modules</span></a></li><li><a class="tocitem" href="#How-to-organize-your-code"><span>How to organize your code</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../../Graphs/">Dynamic graph creation and manipulation</a></li><li><a class="tocitem" href="../../Geometry/Primitives/">Geometry primitives</a></li><li><a class="tocitem" href="../../Geometry/Turtle/">Turtle geometry and scenes</a></li><li><a class="tocitem" href="../../Raytracer/">Ray tracing</a></li><li><a class="tocitem" href="../../Visualization/">3D visualization</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../tutorials/intro_tut/">Intro</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Getting started with VPL</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../tutorials/getting_started/algae/">Algae growth</a></li><li><a class="tocitem" href="../../../tutorials/getting_started/snowflakes/">The Koch snowflake</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">From tree to forest</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../tutorials/from_tree_forest/tree/">Tree</a></li><li><a class="tocitem" href="../../../tutorials/from_tree_forest/forest/">Forest</a></li><li><a class="tocitem" href="../../../tutorials/from_tree_forest/growthforest/">Growth forest</a></li><li><a class="tocitem" href="../../../tutorials/from_tree_forest/raytracedforest/">Ray-traced forest</a></li><li><a class="tocitem" href="../../../tutorials/from_tree_forest/photosynthesis/">Canopy photosynthesis</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">More on rules and queries</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../tutorials/more_rules_queries/context/">Context sensitive rules</a></li><li><a class="tocitem" href="../../../tutorials/more_rules_queries/relationalqueries/">Relational queries</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">How-to guides</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../howto/GridCloner/">Setting up a grid cloner</a></li><li><a class="tocitem" href="../../../howto/Message/">Messages in scenes</a></li><li><a class="tocitem" href="../../../howto/Materials/">Multiple materials/colors</a></li><li><a class="tocitem" href="../../../howto/Traversal/">Advanced traversal</a></li><li><a class="tocitem" href="../../../howto/Coordinates/">Absolute coordinates</a></li><li><a class="tocitem" href="../../../howto/LightSources/">Creating light sources</a></li><li><a class="tocitem" href="../../../howto/Slicer/">Using the slicer</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">API</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../api/graphs/">Graphs</a></li><li><a class="tocitem" href="../../../api/geometry/">Scenes and 3D meshes</a></li><li><a class="tocitem" href="../../../api/turtle/">Turtle geometry</a></li><li><a class="tocitem" href="../../../api/raytracer/">Ray tracing</a></li><li><a class="tocitem" href="../../../api/viz/">3D visualization</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">VPLVerse</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-6-1" type="checkbox"/><label class="tocitem" for="menuitem-6-1"><span class="docs-label">SkyDomes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../VPLVerse/SkyDomes/">SkyDomes package</a></li><li><a class="tocitem" href="../../../VPLVerse/SkyDomes/API/">SkyDomes API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-2" type="checkbox"/><label class="tocitem" for="menuitem-6-2"><span class="docs-label">Ecophys</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../VPLVerse/Ecophys/">Ecophys package</a></li><li><a class="tocitem" href="../../../VPLVerse/Ecophys/photosynthesis/">Photosynthesis API</a></li><li><a class="tocitem" href="../../../VPLVerse/Ecophys/growth/">Growth API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-3" type="checkbox"/><label class="tocitem" for="menuitem-6-3"><span class="docs-label">PlantSimEngine</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../VPLVerse/PlantSimEngine/">PlantSimEngine package</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-4" type="checkbox"/><label class="tocitem" for="menuitem-6-4"><span class="docs-label">PlantBioPhysics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../VPLVerse/PlantBioPhysics/">PlantBioPhysics package</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">Developers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../developers/organization/">Internal organization</a></li><li><a class="tocitem" href="../../../developers/use&amp;dev_packages/">Package and Environment Management for VPL</a></li><li><a class="tocitem" href="../../../developers/style/">Styling protocol</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li><a class="is-disabled">Julia</a></li><li class="is-active"><a href>Modules and files</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Modules and files</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/VirtualPlantLab/VPLDocs/blob/master/docs/src/manual/Julia/Modules.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="manual_modules"><a class="docs-heading-anchor" href="#manual_modules">Modules and files</a><a id="manual_modules-1"></a><a class="docs-heading-anchor-permalink" href="#manual_modules" title="Permalink"></a></h1><p>In this document we will learn how VPL code can be organized into files and modules.</p><h2 id="Files"><a class="docs-heading-anchor" href="#Files">Files</a><a id="Files-1"></a><a class="docs-heading-anchor-permalink" href="#Files" title="Permalink"></a></h2><p>Julia code can be organized into files, which are plain text files with a <code>.jl</code> extension. A file can contain multiple functions, types, and variables. We can load the code from a file using the <code>include</code> function. For example, if we have a file named <code>my_functions.jl</code> that contains the following code, we can load this file into the current Julia session using:</p><pre><code class="language-julia hljs">include(&quot;my_functions.jl&quot;)</code></pre><p>This will simply execute the code in the file, so it is equivalent to copying and pasting the code into the current session.</p><p>When developing a VPL model you want to be able to makes changes to the code and run it without having to restart the Julia session. For functions this is not really an issue but redefinition of types (<code>struct</code> or <code>mutable struct</code>) is not allowed in Julia within the same session. To bypass this we need to use the following strategy:</p><ul><li>Make sure that the package <code>Revise.jl</code> is installed and loaded.</li><li>Use <code>includet</code> instead of <code>include</code> to load files.</li><li>Place all type definitions and global variables inside one or more modules.</li></ul><p>This means that, when building a typical VPL model, you should include at least one module to host the type definitions for the different organs in your model. Of course, for large models you may want to consider splitting your code into multiple files and modules to keep it organized and manageable.</p><p>Note that there are alternative ways to bypass the type redefinition issue, such as using the <a href="https://github.com/BeastyBlacksmith/ProtoStruct.jl"><code>ProtoStruct.jl</code></a> package.</p><h2 id="Modules"><a class="docs-heading-anchor" href="#Modules">Modules</a><a id="Modules-1"></a><a class="docs-heading-anchor-permalink" href="#Modules" title="Permalink"></a></h2><p>In Julia, a module is a collection of related functions, types, and variables that can be grouped together to form a namespace. Modules help in organizing code and avoiding name clashes. A module can be defined using the <code>module</code> keyword, and it can export specific functions or types to make them available outside the module.</p><p>For example, the following code defines a simple module named <code>MyModule</code> that exports a function <code>my_function</code>:</p><pre><code class="language-julia hljs">module MyModule

export my_function

function my_function(x)
    return x + 1
end

end</code></pre><p>We can refer to the name of the module as <code>.MyModule</code> where the <code>.</code> indicates that it is a local module defined in the current scope (Julia packages also defined modules, but they are not prefixed with a <code>.</code>).</p><pre><code class="language-julia hljs">using .MyModule
result = my_function(5)  # This will return 6</code></pre><p>Modules can also be nested, allowing for better organization of code. For example, we can define a module <code>OuterModule</code> that contains another module <code>InnerModule</code>:</p><pre><code class="language-julia hljs">module OuterModule
    module InnerModule
        export inner_function
        function inner_function(x)
            return x * 2
        end
    end  # End of InnerModule
    export outer_function
    function outer_function(x)
        return x + 2
    end
end  # End of OuterModule</code></pre><p>We can use the nested module as follows (not that <code>.</code> is used to separated nested modules):</p><pre><code class="language-julia hljs">using .OuterModule.InnerModule
result_inner = inner_function(3)  # This will return 6
using .OuterModule
result_outer = outer_function(3)  # This will return 5</code></pre><p>The keyword <code>using</code> will make available all exported functions and types from the module, while <code>import</code> will only make the module available without importing its exported functions or types. This allows for more control over what is imported into the current namespace but we need to prefix each function or type with the module name to use it:</p><pre><code class="language-julia hljs">import .OuterModule.InnerModule
result_inner = OuterModule.InnerModule.inner_function(3)  # This will return 6
result_outer = OuterModule.outer_function(3)  # This will return 5</code></pre><p>If the name of the module is too long or cumbersome, we can use the <code>as</code> keyword to create an alias for the module:</p><pre><code class="language-julia hljs">using .OuterModule.InnerModule as Inner # Now Inner refers to OuterModule.InnerModule
result_inner = Inner.inner_function(3)  # This will return 6</code></pre><p>Also, we can import specific functions or types from a module using the <code>import</code> keyword:</p><pre><code class="language-julia hljs">import .OuterModule.InnerModule: inner_function
result_inner = inner_function(3)  # This will return 6</code></pre><p>A Julia source file can contain multiple modules, but a module can only be defined within a single source file.</p><h3 id="Defining-methods-for-existing-functions"><a class="docs-heading-anchor" href="#Defining-methods-for-existing-functions">Defining methods for existing functions</a><a id="Defining-methods-for-existing-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Defining-methods-for-existing-functions" title="Permalink"></a></h3><p>If you want to add a method to an existing function so that it works with a new type (e.g., the <code>feed!</code> methods that are used in VPL to generate geometry), you need to define the method by prefixing the function name with the module name where the function is defined. As you will see in the tutorials, this means we define <code>feed!</code> methods as follows:</p><pre><code class="language-julia hljs">function VirtualPlantLab.feed!(turtle::Turtle,, ...)
    # Implementation of the method
end</code></pre><p>It is important to do this to make sure that we are creating a method for the <code>feed!</code> function even if you used <code>using VirtualPlantLab</code>.</p><h2 id="How-to-organize-your-code"><a class="docs-heading-anchor" href="#How-to-organize-your-code">How to organize your code</a><a id="How-to-organize-your-code-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-organize-your-code" title="Permalink"></a></h2><p>VPL models can become quite complex, depending on how much functionality is added. There is no correct way to organize your code into multiples files and modules but it helps to think for a bit why do we even want to do this (i.e., as said before, you probably want to have at least one modules for your organ types but you could write an entire model in a single file, as in the tutorials in this website).</p><p>We generally want to have multiple files to make sure that, when we are editing a particular aspect of the code, we visit as few files as possible. The reason for this is that it is always easier to search within a single file and to jump up and down in the code than to switch files (though searching across files is also possible in most editors).</p><p>We also want to have multiple files if we expect to reuse some of the code for other models or simpler version of our current model. This touches on the issue of modularity, whereby we want to organized different parts of the code that can be reused in different contexts.</p><p>Regarding modules, the main reason for their use (besides what was described earlier about types) is to avoid clashes between function names and global variables. This is very much related to the issue of modularity, as we want to be able to reuse code without worrying about having to rename functions or variables inside the code (i.e., a module helps build the abstraction of a <em>black box</em> that can be used without knowing its internal details). This may never be required in small models (or even in large models that are not meant to be reused), so just use your own judgement to decide how to organize your code based on your specific needs.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Objects/">« Multiple dispatch and composition</a><a class="docs-footer-nextpage" href="../../Graphs/">Dynamic graph creation and manipulation »</a><div class="flexbox-break"></div></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 6 August 2025 12:21">Wednesday 6 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
